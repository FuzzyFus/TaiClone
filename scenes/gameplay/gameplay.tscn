[gd_scene load_steps=18 format=3 uid="uid://duw1w1bhgtct6"]

[ext_resource type="Script" path="res://scenes/gameplay/gameplay.gd" id="1_3gk3b"]
[ext_resource type="Texture2D" uid="uid://uwfi7yvyd16r" path="res://assets/textures/screenshot387.jpg" id="1_hg67d"]
[ext_resource type="Texture2D" uid="uid://bsvwraja2y1d1" path="res://assets/default_skin/taiko-bar-right@2x.png" id="2_e5vbt"]
[ext_resource type="Texture2D" uid="uid://duc1opv4katn" path="res://assets/default_skin/taiko-bar-left@2x.png" id="3_fdmyn"]
[ext_resource type="Texture2D" uid="uid://bgu0u7gnx7vj5" path="res://assets/default_skin/taiko-drum-outer@2x.png" id="4_enqju"]
[ext_resource type="Texture2D" uid="uid://bvhxbxiv6sw8j" path="res://assets/default_skin/taiko-drum-inner@2x.png" id="5_i31tg"]
[ext_resource type="Texture2D" uid="uid://cvegpba3ep5rg" path="res://assets/default_skin/taikohitcircle.png" id="6_j2wxl"]
[ext_resource type="Texture2D" uid="uid://k4t643vmxd8h" path="res://assets/default_skin/approachcircle.png" id="7_13i7v"]
[ext_resource type="Script" path="res://utility/audio/audio_queuer.gd" id="9_tgle1"]
[ext_resource type="Texture2D" uid="uid://d1g3e0agicyil" path="res://assets/default_skin/taiko-hit300.png" id="12_cbuc6"]
[ext_resource type="Script" path="res://scenes/gameplay/score_manager.gd" id="13_evyiw"]
[ext_resource type="AudioStream" uid="uid://7cd7garny8ig" path="res://assets/default_skin/combobreak.wav" id="13_kii7l"]
[ext_resource type="Texture2D" uid="uid://kc1oeu2a2by6" path="res://assets/default_skin/scorebar-bg@2x.png" id="14_npcy7"]
[ext_resource type="Texture2D" uid="uid://2o44yuo7vdis" path="res://assets/default_skin/scorebar-colour@2x.png" id="15_o6ggk"]
[ext_resource type="Texture2D" uid="uid://byvvf50k1xbuj" path="res://assets/default_skin/taiko-hit100.png" id="17_pqxbr"]
[ext_resource type="Texture2D" uid="uid://fn75ol8otggh" path="res://assets/default_skin/taiko-hit0@2x.png" id="18_t1emc"]

[sub_resource type="LabelSettings" id="LabelSettings_u26yd"]
font_size = 64
outline_size = 4
outline_color = Color(0, 0, 0, 1)

[node name="Gameplay" type="Control" groups=["Gameplay"]]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("1_3gk3b")

[node name="ref" type="TextureRect" parent="."]
visible = false
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("1_hg67d")
expand_mode = 1

[node name="Track" type="TextureRect" parent="."]
layout_mode = 1
anchors_preset = 14
anchor_top = 0.5
anchor_right = 1.0
anchor_bottom = 0.5
offset_top = -237.0
offset_bottom = 42.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("2_e5vbt")
expand_mode = 1

[node name="DrumIndicator" type="TextureRect" parent="Track"]
layout_mode = 1
anchors_preset = 9
anchor_bottom = 1.0
offset_right = 254.0
grow_vertical = 2
texture = ExtResource("3_fdmyn")
expand_mode = 4

[node name="LeftKat" type="TextureRect" parent="Track/DrumIndicator"]
modulate = Color(1, 1, 1, 0)
layout_mode = 1
anchors_preset = 9
anchor_bottom = 1.0
offset_right = 127.0
grow_vertical = 2
texture = ExtResource("4_enqju")
expand_mode = 4
flip_h = true

[node name="LeftDon" type="TextureRect" parent="Track/DrumIndicator"]
modulate = Color(1, 1, 1, 0)
layout_mode = 1
anchors_preset = 9
anchor_bottom = 1.0
offset_right = 127.0
grow_vertical = 2
texture = ExtResource("5_i31tg")
expand_mode = 4

[node name="RightDon" type="TextureRect" parent="Track/DrumIndicator"]
modulate = Color(1, 1, 1, 0)
layout_mode = 1
anchors_preset = 11
anchor_left = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -127.0
grow_horizontal = 0
grow_vertical = 2
texture = ExtResource("5_i31tg")
expand_mode = 4
flip_h = true

[node name="RightKat" type="TextureRect" parent="Track/DrumIndicator"]
modulate = Color(1, 1, 1, 0)
layout_mode = 1
anchors_preset = 11
anchor_left = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -127.0
grow_horizontal = 0
grow_vertical = 2
texture = ExtResource("4_enqju")
expand_mode = 4

[node name="HitPoint" type="TextureRect" parent="Track"]
self_modulate = Color(1, 1, 1, 0.33)
layout_mode = 1
anchors_preset = 4
anchor_top = 0.5
anchor_bottom = 0.5
offset_left = 295.0
offset_top = -64.5
offset_right = 425.0
offset_bottom = 65.5
grow_vertical = 2
texture = ExtResource("6_j2wxl")
expand_mode = 1

[node name="Outline" type="TextureRect" parent="Track/HitPoint"]
self_modulate = Color(1, 1, 1, 0.5)
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -19.0
offset_top = -20.0
offset_right = 19.0
offset_bottom = 20.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("7_13i7v")
expand_mode = 1

[node name="HitObjectContainer" type="Control" parent="Track/HitPoint"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -65.0
offset_right = -65.0
grow_horizontal = 2
grow_vertical = 2

[node name="AudioQueuer" type="Node2D" parent="."]
script = ExtResource("9_tgle1")

[node name="Music" type="AudioStreamPlayer" parent="."]
bus = &"Music"

[node name="fps" type="Label" parent="."]
layout_mode = 0
offset_top = 46.0
offset_right = 66.0
offset_bottom = 69.0
text = "FPS: XXX"

[node name="ScoreManager" type="Control" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("13_evyiw")

[node name="Score" type="Label" parent="ScoreManager"]
layout_mode = 1
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -252.0
offset_top = -13.0
offset_right = -7.0
offset_bottom = 73.0
grow_horizontal = 0
text = "0000000"
label_settings = SubResource("LabelSettings_u26yd")
horizontal_alignment = 2

[node name="Accuracy" type="Label" parent="ScoreManager"]
layout_mode = 1
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -252.0
offset_top = 41.0
offset_right = -7.0
offset_bottom = 127.0
grow_horizontal = 0
text = "100.00%"
label_settings = SubResource("LabelSettings_u26yd")
horizontal_alignment = 2

[node name="SongProgressMeter" type="TextureProgressBar" parent="ScoreManager"]
layout_mode = 1
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -73.0
offset_top = 120.0
offset_right = -9.0
offset_bottom = 184.0
grow_horizontal = 0
max_value = 1.0
step = 0.001
fill_mode = 4
nine_patch_stretch = true
texture_under = ExtResource("6_j2wxl")
texture_progress = ExtResource("6_j2wxl")
tint_under = Color(0.2, 0.2, 0.2, 1)

[node name="Combo" type="Label" parent="ScoreManager"]
layout_mode = 1
offset_left = 1.0
offset_top = 400.0
offset_right = 251.0
offset_bottom = 486.0
text = "0"
label_settings = SubResource("LabelSettings_u26yd")
horizontal_alignment = 1
vertical_alignment = 1

[node name="Health" type="TextureProgressBar" parent="ScoreManager"]
layout_mode = 0
offset_right = 1298.0
offset_bottom = 40.0
value = 100.0
texture_under = ExtResource("14_npcy7")
texture_progress = ExtResource("15_o6ggk")

[node name="ComboBreak" type="AudioStreamPlayer" parent="ScoreManager"]
stream = ExtResource("13_kii7l")
bus = &"SFX"

[node name="RawInfo" type="Label" parent="ScoreManager"]
layout_mode = 1
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -498.0
offset_right = -274.0
offset_bottom = 97.0
grow_horizontal = 0
text = "accurate: 0
inaccurate: 0
miss: 0"

[node name="Judgements" type="Control" parent="ScoreManager"]
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="Accurate" type="TextureRect" parent="ScoreManager/Judgements"]
modulate = Color(1, 1, 1, 0)
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = 156.0
offset_top = 236.0
offset_right = 525.0
offset_bottom = 610.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("12_cbuc6")
expand_mode = 1
stretch_mode = 5

[node name="Inaccurate" type="TextureRect" parent="ScoreManager/Judgements"]
modulate = Color(1, 1, 1, 0)
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = 156.0
offset_top = 236.0
offset_right = 525.0
offset_bottom = 610.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("17_pqxbr")
expand_mode = 1
stretch_mode = 5

[node name="Miss" type="TextureRect" parent="ScoreManager/Judgements"]
modulate = Color(1, 1, 1, 0)
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = 156.0
offset_top = 236.0
offset_right = 525.0
offset_bottom = 610.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("18_t1emc")
expand_mode = 1
stretch_mode = 5
